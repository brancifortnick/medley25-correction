{"ast":null,"code":"var _jsxFileName = \"/home/nicholas/med/medley-sesh/react-app/src/components/User/User.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getOneUser, addMusicianProfile } from \"../../store/user\";\nimport UsersMusicians from \"../UsersMusicians/UsersMusicians\";\n// import backdrop from \"../../assets/blueandpink.jpg\";\nimport \"./User.css\";\nfunction User() {\n  const dispatch = useDispatch();\n  const {\n    userId\n  } = useParams();\n  const usersInformation = useSelector(state => state.usersReducer);\n  const user = useSelector(state => state.session.user);\n  const [isCreatingMusician, setIsCreatingMusician] = useState(false);\n  useEffect(() => {\n    dispatch(getOneUser(Number(userId)));\n  }, [dispatch, userId]);\n  const handleAddMusician = async () => {\n    setIsCreatingMusician(true);\n    try {\n      const result = await dispatch(addMusicianProfile(userId));\n      if (result.errors) {\n        alert(`Error: ${result.errors}`);\n      } else {\n        alert(\"Musician profile created successfully! You can now edit it.\");\n        // Refresh the user data to show the new musician\n        dispatch(getOneUser(Number(userId)));\n      }\n    } catch (error) {\n      console.error(\"Error creating musician:\", error);\n      alert(\"An error occurred while creating the musician profile.\");\n    } finally {\n      setIsCreatingMusician(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-page-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"usersMusicians-component\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    style: {\n      textDecoration: \"none\",\n      color: \"black\",\n      marginLeft: \"10px\",\n      padding: \"8px 16px\",\n      backgroundColor: \"#c4b180\",\n      borderRadius: \"6px\"\n    },\n    to: `/users/${userId}/add-musician`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Add Musician Profile\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"component\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UsersMusicians, {\n    userId: Number(userId),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }))));\n}\nexport default User;\n\n//-REFACTORED BELOW CODE\n\n// const [user, setUser] = useState({});\n// useEffect(() => {\n//   if (!userId) {\n//     return;\n//   }\n//   (async () => {\n//     const response = await fetch(`/api/users/${userId}`);\n//     const user = await response.json();\n//     setUser(user);\n//   })();\n// }, [userId]);\n\n// if (!user) {\n//   return null;\n// }","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","useParams","Link","getOneUser","addMusicianProfile","UsersMusicians","User","dispatch","userId","usersInformation","state","usersReducer","user","session","isCreatingMusician","setIsCreatingMusician","Number","handleAddMusician","result","errors","alert","error","console","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","id","style","textDecoration","color","marginLeft","padding","backgroundColor","borderRadius","to"],"sources":["/home/nicholas/med/medley-sesh/react-app/src/components/User/User.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getOneUser, addMusicianProfile } from \"../../store/user\";\nimport UsersMusicians from \"../UsersMusicians/UsersMusicians\";\n// import backdrop from \"../../assets/blueandpink.jpg\";\nimport \"./User.css\";\n\nfunction User() {\n  const dispatch = useDispatch();\n  const { userId } = useParams();\n  const usersInformation = useSelector((state) => state.usersReducer);\n  const user = useSelector(state => state.session.user);\n  \n  const [isCreatingMusician, setIsCreatingMusician] = useState(false);\n\n  useEffect(() => {\n    dispatch(getOneUser(Number(userId)));\n  }, [dispatch, userId]);\n\n  const handleAddMusician = async () => {\n    setIsCreatingMusician(true);\n    try {\n      const result = await dispatch(addMusicianProfile(userId));\n      if (result.errors) {\n        alert(`Error: ${result.errors}`);\n      } else {\n        alert(\"Musician profile created successfully! You can now edit it.\");\n        // Refresh the user data to show the new musician\n        dispatch(getOneUser(Number(userId)));\n      }\n    } catch (error) {\n      console.error(\"Error creating musician:\", error);\n      alert(\"An error occurred while creating the musician profile.\");\n    } finally {\n      setIsCreatingMusician(false);\n    }\n  };\n\n  return (\n    <div className=\"user-page-container\">\n \n  \n    \n      {/* <div id=\"your-musicians-text\">\n        <strong> Your Musicians </strong>\n      </div> */}\n\n      <div id=\"usersMusicians-component\">\n\n        <Link\n          style={{\n            textDecoration: \"none\",\n            color: \"black\",\n            marginLeft: \"10px\",\n            padding: \"8px 16px\",\n            backgroundColor: \"#c4b180\",\n            borderRadius: \"6px\",\n\n          }}\n          to={`/users/${userId}/add-musician`}\n        >\n          Add Musician Profile\n        </Link>\n        <div id=\"component\">\n          <UsersMusicians userId={Number(userId)}/>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default User;\n\n//-REFACTORED BELOW CODE\n\n// const [user, setUser] = useState({});\n// useEffect(() => {\n//   if (!userId) {\n//     return;\n//   }\n//   (async () => {\n//     const response = await fetch(`/api/users/${userId}`);\n//     const user = await response.json();\n//     setUser(user);\n//   })();\n// }, [userId]);\n\n// if (!user) {\n//   return null;\n// }\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,SAAS,EAAEC,IAAI,QAAQ,kBAAkB;AAClD,SAASC,UAAU,EAAEC,kBAAkB,QAAQ,kBAAkB;AACjE,OAAOC,cAAc,MAAM,kCAAkC;AAC7D;AACA,OAAO,YAAY;AAEnB,SAASC,IAAIA,CAAA,EAAG;EACd,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEQ;EAAO,CAAC,GAAGP,SAAS,CAAC,CAAC;EAC9B,MAAMQ,gBAAgB,GAAGV,WAAW,CAAEW,KAAK,IAAKA,KAAK,CAACC,YAAY,CAAC;EACnE,MAAMC,IAAI,GAAGb,WAAW,CAACW,KAAK,IAAIA,KAAK,CAACG,OAAO,CAACD,IAAI,CAAC;EAErD,MAAM,CAACE,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAEnEC,SAAS,CAAC,MAAM;IACdS,QAAQ,CAACJ,UAAU,CAACa,MAAM,CAACR,MAAM,CAAC,CAAC,CAAC;EACtC,CAAC,EAAE,CAACD,QAAQ,EAAEC,MAAM,CAAC,CAAC;EAEtB,MAAMS,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpCF,qBAAqB,CAAC,IAAI,CAAC;IAC3B,IAAI;MACF,MAAMG,MAAM,GAAG,MAAMX,QAAQ,CAACH,kBAAkB,CAACI,MAAM,CAAC,CAAC;MACzD,IAAIU,MAAM,CAACC,MAAM,EAAE;QACjBC,KAAK,CAAC,UAAUF,MAAM,CAACC,MAAM,EAAE,CAAC;MAClC,CAAC,MAAM;QACLC,KAAK,CAAC,6DAA6D,CAAC;QACpE;QACAb,QAAQ,CAACJ,UAAU,CAACa,MAAM,CAACR,MAAM,CAAC,CAAC,CAAC;MACtC;IACF,CAAC,CAAC,OAAOa,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDD,KAAK,CAAC,wDAAwD,CAAC;IACjE,CAAC,SAAS;MACRL,qBAAqB,CAAC,KAAK,CAAC;IAC9B;EACF,CAAC;EAED,oBACEnB,KAAA,CAAA2B,aAAA;IAAKC,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAQlClC,KAAA,CAAA2B,aAAA;IAAKQ,EAAE,EAAC,0BAA0B;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEhClC,KAAA,CAAA2B,aAAA,CAACrB,IAAI;IACH8B,KAAK,EAAE;MACLC,cAAc,EAAE,MAAM;MACtBC,KAAK,EAAE,OAAO;MACdC,UAAU,EAAE,MAAM;MAClBC,OAAO,EAAE,UAAU;MACnBC,eAAe,EAAE,SAAS;MAC1BC,YAAY,EAAE;IAEhB,CAAE;IACFC,EAAE,EAAE,UAAU/B,MAAM,eAAgB;IAAAiB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACrC,sBAEK,CAAC,eACPlC,KAAA,CAAA2B,aAAA;IAAKQ,EAAE,EAAC,WAAW;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjBlC,KAAA,CAAA2B,aAAA,CAAClB,cAAc;IAACG,MAAM,EAAEQ,MAAM,CAACR,MAAM,CAAE;IAAAiB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CACrC,CACF,CACF,CAAC;AAEV;AACA,eAAexB,IAAI;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module"}