{"ast":null,"code":"const GET_MUSICIANS = \"musician/GET_MUSICIANS\";\nconst GET_ONE = \"musician/GET_ONE\";\nconst ADD_MUSICIAN = \"musician/ADD_MUSICIAN\";\nconst DELETE_MUSICIAN = \"musician/DELETE_MUSICIAN\";\nconst UPDATE_BIOGRAPHY = \"musician/UPDATE_BIOGRAPHY\";\n// const ADD_IMAGE = \"musician/ADD_IMAGE\"; -- put route for image updating\n\nconst getAllArtists = musicians => ({\n  type: GET_MUSICIANS,\n  payload: musicians\n});\nconst getOne = musician => ({\n  type: GET_ONE,\n  payload: musician\n});\nconst addMusician = musician => ({\n  type: ADD_MUSICIAN,\n  payload: musician\n});\nconst deleteMusician = musician => ({\n  type: DELETE_MUSICIAN,\n  payload: musician\n});\nconst updateBio = musician => ({\n  type: UPDATE_BIOGRAPHY,\n  payload: musician\n});\n\n// const addImage = (musician) => ({\n//   type: ADD_IMAGE,\n//   payload: musician,\n// });\n//---put route\n\nexport const getAllMusicians = id => async dispatch => {\n  const res = await fetch(`/api/musicians/`);\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(getAllArtists(data.musicians));\n    // return data;\n  }\n};\nexport const postNewMusician = profile_img => async dispatch => {\n  console.log(\"IN THUNK\", profile_img);\n  try {\n    // Step 1: Upload image\n    const formData = new FormData();\n    formData.append(\"profile_img\", profile_img);\n    const imageRes = await fetch(\"/api/musicians/new-picture\", {\n      method: \"POST\",\n      body: formData // ✅ No headers here!\n    });\n    if (!imageRes.ok) {\n      console.log(\"Image upload failed\");\n      return;\n    }\n    const imageData = await imageRes.json();\n    const profile_img = imageData.url;\n    dispatch(addMusician(profile_img));\n  } catch (err) {\n    console.error(\"Error in postNewMusician thunk:\", err);\n  }\n};\nexport const addingFullMusican = (profile_img, biography, userId, musician_name) => {\n  return dispatch => {\n    if (profile_img && biography && userId && musician_name) {\n      dispatch(postNewMusician(profile_img, biography, Number(userId), musician_name));\n    } else {\n      console.log(\"error missings params\");\n    }\n  };\n};\n// Step 2: Create musician\n\nexport const getOneMusician = id => async dispatch => {\n  const res = await fetch(`/api/musicians/${id}`);\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(getOne(data));\n  } //\n};\nexport const deleteOneMusician = id => async dispatch => {\n  const res = await fetch(`/api/musicians/${id}`, {\n    method: \"DELETE\"\n  });\n  if (res.ok) {\n    dispatch(deleteMusician(id));\n  } else {\n    console.log(\"Musician Can't be deleted\");\n  }\n};\nexport const updateBiography = (formData, musicianId) => async dispatch => {\n  const response = await fetch(`/api/musicians/${musicianId}/biography`, {\n    method: \"PUT\",\n    body: formData\n  });\n  if (response.ok) {\n    const biography = await response.json();\n    dispatch(updateBio(biography));\n  }\n};\n\n// export const uploadImageToS = (profile_img, musicianId) => async (dispatch) => {\n//   // profile_img = profile_img.url\n//   const response = await fetch(`/api/musicians/${musicianId}/image`, {\n//     method: \"PUT\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//     body: JSON.stringify({ profile_img, musicianId }),\n//   });\n//   if (response.ok) {\n//     const picture = await response.json();\n//     dispatch(addImage(picture));\n//   } else {\n//     console.log(\"Image can't be added\");\n//   }\n// };\n//---put route semi functioning\n\nconst initialState = {};\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case GET_MUSICIANS:\n      let newState = {};\n      action.payload.forEach(musician => {\n        newState[musician.id] = musician;\n      });\n      return newState;\n    case ADD_MUSICIAN:\n      const addState = {\n        ...state\n      };\n      addState[action.payload.id] = action.payload;\n      return addState;\n    // return { ...action.payload };\n    case GET_ONE:\n      return {\n        ...action.payload\n      };\n    case DELETE_MUSICIAN:\n      const currentState = {\n        ...state\n      };\n      delete currentState[action.payload.id];\n      return currentState;\n    case UPDATE_BIOGRAPHY:\n      return {\n        ...action.payload\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["GET_MUSICIANS","GET_ONE","ADD_MUSICIAN","DELETE_MUSICIAN","UPDATE_BIOGRAPHY","getAllArtists","musicians","type","payload","getOne","musician","addMusician","deleteMusician","updateBio","getAllMusicians","id","dispatch","res","fetch","ok","data","json","postNewMusician","profile_img","console","log","formData","FormData","append","imageRes","method","body","imageData","url","err","error","addingFullMusican","biography","userId","musician_name","Number","getOneMusician","deleteOneMusician","updateBiography","musicianId","response","initialState","reducer","state","arguments","length","undefined","action","newState","forEach","addState","currentState"],"sources":["/home/nicholas/med/medley-sesh/react-app/src/store/musician.js"],"sourcesContent":["const GET_MUSICIANS = \"musician/GET_MUSICIANS\";\r\nconst GET_ONE = \"musician/GET_ONE\";\r\nconst ADD_MUSICIAN = \"musician/ADD_MUSICIAN\";\r\nconst DELETE_MUSICIAN = \"musician/DELETE_MUSICIAN\";\r\nconst UPDATE_BIOGRAPHY = \"musician/UPDATE_BIOGRAPHY\";\r\n// const ADD_IMAGE = \"musician/ADD_IMAGE\"; -- put route for image updating\r\n\r\nconst getAllArtists = (musicians) => ({\r\n  type: GET_MUSICIANS,\r\n  payload: musicians,\r\n});\r\n\r\nconst getOne = (musician) => ({\r\n  type: GET_ONE,\r\n  payload: musician,\r\n});\r\n\r\nconst addMusician = (musician) => ({\r\n  type: ADD_MUSICIAN,\r\n  payload: musician,\r\n});\r\n\r\nconst deleteMusician = (musician) => ({\r\n  type: DELETE_MUSICIAN,\r\n  payload: musician,\r\n});\r\n\r\nconst updateBio = (musician) => ({\r\n  type: UPDATE_BIOGRAPHY,\r\n  payload: musician,\r\n});\r\n\r\n// const addImage = (musician) => ({\r\n//   type: ADD_IMAGE,\r\n//   payload: musician,\r\n// });\r\n//---put route\r\n\r\nexport const getAllMusicians = (id) => async (dispatch) => {\r\n  const res = await fetch(`/api/musicians/`);\r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    dispatch(getAllArtists(data.musicians));\r\n    // return data;\r\n  }\r\n};\r\n\r\nexport const postNewMusician =\r\n  (profile_img) => async (dispatch) => {\r\n    console.log(\"IN THUNK\", profile_img)\r\n    try {\r\n      // Step 1: Upload image\r\n      const formData = new FormData();\r\n      formData.append(\"profile_img\", profile_img);\r\n      const imageRes = await fetch(\"/api/musicians/new-picture\", {\r\n        method: \"POST\",\r\n        body: formData, // ✅ No headers here!\r\n      });\r\n\r\n      if (!imageRes.ok) {\r\n        console.log(\"Image upload failed\");\r\n        return;\r\n      }\r\n\r\n      const imageData = await imageRes.json();\r\n      const profile_img = imageData.url;\r\n      dispatch(addMusician(profile_img));\r\n    } catch (err) {\r\n      console.error(\"Error in postNewMusician thunk:\", err);\r\n    }\r\n  };\r\n\r\nexport const addingFullMusican = (profile_img, biography, userId, musician_name) => {\r\n  return (dispatch) => {\r\n    if (profile_img && biography && userId && musician_name) {\r\n      dispatch(\r\n        postNewMusician(profile_img, biography, Number(userId), musician_name)\r\n      );\r\n    } else {\r\n      console.log(\"error missings params\");\r\n    }\r\n  };\r\n}\r\n// Step 2: Create musician\r\n\r\n\r\nexport const getOneMusician = (id) => async (dispatch) => {\r\n  const res = await fetch(`/api/musicians/${id}`);\r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    dispatch(getOne(data));\r\n  } //\r\n};\r\n\r\nexport const deleteOneMusician = (id) => async (dispatch) => {\r\n  const res = await fetch(`/api/musicians/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n  if (res.ok) {\r\n    dispatch(deleteMusician(id));\r\n  } else {\r\n    console.log(\"Musician Can't be deleted\");\r\n  }\r\n};\r\n\r\nexport const updateBiography = (formData, musicianId) => async (dispatch) => {\r\n  const response = await fetch(`/api/musicians/${musicianId}/biography`, {\r\n    method: \"PUT\",\r\n    body: formData,\r\n  });\r\n  if (response.ok) {\r\n    const biography = await response.json();\r\n    dispatch(updateBio(biography));\r\n  }\r\n};\r\n\r\n// export const uploadImageToS = (profile_img, musicianId) => async (dispatch) => {\r\n//   // profile_img = profile_img.url\r\n//   const response = await fetch(`/api/musicians/${musicianId}/image`, {\r\n//     method: \"PUT\",\r\n//     headers: {\r\n//       \"Content-Type\": \"application/json\",\r\n//     },\r\n//     body: JSON.stringify({ profile_img, musicianId }),\r\n//   });\r\n//   if (response.ok) {\r\n//     const picture = await response.json();\r\n//     dispatch(addImage(picture));\r\n//   } else {\r\n//     console.log(\"Image can't be added\");\r\n//   }\r\n// };\r\n//---put route semi functioning\r\n\r\nconst initialState = {};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_MUSICIANS:\r\n      let newState = {};\r\n      action.payload.forEach((musician) => {\r\n        newState[musician.id] = musician;\r\n      });\r\n      return newState;\r\n    case ADD_MUSICIAN:\r\n      const addState = { ...state };\r\n      addState[action.payload.id] = action.payload;\r\n      return addState;\r\n    // return { ...action.payload };\r\n    case GET_ONE:\r\n      return { ...action.payload };\r\n    case DELETE_MUSICIAN:\r\n      const currentState = { ...state };\r\n      delete currentState[action.payload.id];\r\n      return currentState;\r\n    case UPDATE_BIOGRAPHY:\r\n      return { ...action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}