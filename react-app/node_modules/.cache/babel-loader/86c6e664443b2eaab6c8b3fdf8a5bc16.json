{"ast":null,"code":"const GET_MUSICIANS = \"musician/GET_MUSICIANS\";\nconst GET_ONE = \"musician/GET_ONE\";\nconst ADD_MUSICIAN = \"musician/ADD_MUSICIAN\";\nconst DELETE_MUSICIAN = \"musician/DELETE_MUSICIAN\";\nconst UPDATE_BIOGRAPHY = \"musician/UPDATE_BIOGRAPHY\";\n// const ADD_IMAGE = \"musician/ADD_IMAGE\"; -- put route for image updating\n\nconst getAllArtists = musicians => ({\n  type: GET_MUSICIANS,\n  payload: musicians\n});\nconst getOne = musician => ({\n  type: GET_ONE,\n  payload: musician\n});\nconst addMusician = musician => ({\n  type: ADD_MUSICIAN,\n  payload: musician\n});\nconst deleteMusician = musician => ({\n  type: DELETE_MUSICIAN,\n  payload: musician\n});\nconst updateBio = musician => ({\n  type: UPDATE_BIOGRAPHY,\n  payload: musician\n});\n\n// const addImage = (musician) => ({\n//   type: ADD_IMAGE,\n//   payload: musician,\n// });\n//---put route\n\nexport const getAllMusicians = id => async dispatch => {\n  const res = await fetch(`/api/musicians/`);\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(getAllArtists(data.musicians));\n    // return data;\n  }\n};\nexport const postNewMusician = (profile_img, biography, user_id, musician_name) => async dispatch => {\n  profile_img = profile_img.url;\n  const res = await fetch(\"/api/musicians/new-picture\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      profile_img,\n      biography,\n      user_id,\n      musician_name\n    })\n  });\n  if (res.ok) {\n    const musician = await res.json();\n    dispatch(addMusician(musician));\n  } else {\n    console.log(\"Musician Not Added - Error\");\n  }\n};\nexport const getOneMusician = id => async dispatch => {\n  const res = await fetch(`/api/musicians/${id}`);\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(getOne(data));\n  } //\n};\nexport const deleteOneMusician = id => async dispatch => {\n  const res = await fetch(`/api/musicians/${id}`, {\n    method: \"DELETE\"\n  });\n  if (res.ok) {\n    dispatch(deleteMusician(id));\n  } else {\n    console.log(\"Musician Can't be deleted\");\n  }\n};\nexport const updateBiography = (formData, musicianId) => async dispatch => {\n  const response = await fetch(`/api/musicians/${musicianId}/biography`, {\n    method: \"PUT\",\n    body: formData\n  });\n  if (response.ok) {\n    const biography = await response.json();\n    dispatch(updateBio(biography));\n  }\n};\n\n// export const uploadImageToS = (profile_img, musicianId) => async (dispatch) => {\n//   // profile_img = profile_img.url\n//   const response = await fetch(`/api/musicians/${musicianId}/image`, {\n//     method: \"PUT\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//     body: JSON.stringify({ profile_img, musicianId }),\n//   });\n//   if (response.ok) {\n//     const picture = await response.json();\n//     dispatch(addImage(picture));\n//   } else {\n//     console.log(\"Image can't be added\");\n//   }\n// };\n//---put route semi functioning\n\nconst initialState = {};\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case GET_MUSICIANS:\n      let newState = {};\n      action.payload.forEach(musician => {\n        newState[musician.id] = musician;\n      });\n      return newState;\n    case ADD_MUSICIAN:\n      const addState = {\n        ...state\n      };\n      addState[action.payload.id] = action.payload;\n      return addState;\n    // return { ...action.payload };\n    case GET_ONE:\n      return {\n        ...action.payload\n      };\n    case DELETE_MUSICIAN:\n      const currentState = {\n        ...state\n      };\n      delete currentState[action.payload.id];\n      return currentState;\n    case UPDATE_BIOGRAPHY:\n      return {\n        ...action.payload\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["GET_MUSICIANS","GET_ONE","ADD_MUSICIAN","DELETE_MUSICIAN","UPDATE_BIOGRAPHY","getAllArtists","musicians","type","payload","getOne","musician","addMusician","deleteMusician","updateBio","getAllMusicians","id","dispatch","res","fetch","ok","data","json","postNewMusician","profile_img","biography","user_id","musician_name","url","method","headers","body","JSON","stringify","console","log","getOneMusician","deleteOneMusician","updateBiography","formData","musicianId","response","initialState","reducer","state","arguments","length","undefined","action","newState","forEach","addState","currentState"],"sources":["/home/nicholas/med/medley-sesh/react-app/src/store/musician.js"],"sourcesContent":["const GET_MUSICIANS = \"musician/GET_MUSICIANS\";\r\nconst GET_ONE = \"musician/GET_ONE\";\r\nconst ADD_MUSICIAN = \"musician/ADD_MUSICIAN\";\r\nconst DELETE_MUSICIAN = \"musician/DELETE_MUSICIAN\";\r\nconst UPDATE_BIOGRAPHY = \"musician/UPDATE_BIOGRAPHY\";\r\n// const ADD_IMAGE = \"musician/ADD_IMAGE\"; -- put route for image updating\r\n\r\nconst getAllArtists = (musicians) => ({\r\n  type: GET_MUSICIANS,\r\n  payload: musicians,\r\n});\r\n\r\nconst getOne = (musician) => ({\r\n  type: GET_ONE,\r\n  payload: musician,\r\n});\r\n\r\nconst addMusician = (musician) => ({\r\n  type: ADD_MUSICIAN,\r\n  payload: musician,\r\n});\r\n\r\nconst deleteMusician = (musician) => ({\r\n  type: DELETE_MUSICIAN,\r\n  payload: musician,\r\n});\r\n\r\nconst updateBio = (musician) => ({\r\n  type: UPDATE_BIOGRAPHY,\r\n  payload: musician,\r\n});\r\n\r\n// const addImage = (musician) => ({\r\n//   type: ADD_IMAGE,\r\n//   payload: musician,\r\n// });\r\n//---put route\r\n\r\nexport const getAllMusicians = (id) => async (dispatch) => {\r\n  const res = await fetch(`/api/musicians/`);\r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    dispatch(getAllArtists(data.musicians));\r\n    // return data;\r\n  }\r\n};\r\n\r\nexport const postNewMusician =\r\n  (profile_img, biography, user_id, musician_name) => async (dispatch) => {\r\n    profile_img = profile_img.url;\r\n    const res = await fetch(\"/api/musicians/new-picture\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ profile_img, biography, user_id, musician_name }),\r\n    });\r\n    if (res.ok) {\r\n      const musician = await res.json();\r\n      dispatch(addMusician(musician));\r\n    } else {\r\n      console.log(\"Musician Not Added - Error\");\r\n    }\r\n  };\r\n\r\nexport const getOneMusician = (id) => async (dispatch) => {\r\n  const res = await fetch(`/api/musicians/${id}`);\r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    dispatch(getOne(data));\r\n  } //\r\n};\r\n\r\nexport const deleteOneMusician = (id) => async (dispatch) => {\r\n  const res = await fetch(`/api/musicians/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n  if (res.ok) {\r\n    dispatch(deleteMusician(id));\r\n  } else {\r\n    console.log(\"Musician Can't be deleted\");\r\n  }\r\n};\r\n\r\nexport const updateBiography = (formData, musicianId) => async (dispatch) => {\r\n  const response = await fetch(`/api/musicians/${musicianId}/biography`, {\r\n    method: \"PUT\",\r\n    body: formData,\r\n  });\r\n  if (response.ok) {\r\n    const biography = await response.json();\r\n    dispatch(updateBio(biography));\r\n  }\r\n};\r\n\r\n// export const uploadImageToS = (profile_img, musicianId) => async (dispatch) => {\r\n//   // profile_img = profile_img.url\r\n//   const response = await fetch(`/api/musicians/${musicianId}/image`, {\r\n//     method: \"PUT\",\r\n//     headers: {\r\n//       \"Content-Type\": \"application/json\",\r\n//     },\r\n//     body: JSON.stringify({ profile_img, musicianId }),\r\n//   });\r\n//   if (response.ok) {\r\n//     const picture = await response.json();\r\n//     dispatch(addImage(picture));\r\n//   } else {\r\n//     console.log(\"Image can't be added\");\r\n//   }\r\n// };\r\n//---put route semi functioning\r\n\r\nconst initialState = {};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_MUSICIANS:\r\n      let newState = {};\r\n      action.payload.forEach((musician) => {\r\n        newState[musician.id] = musician;\r\n      });\r\n      return newState;\r\n    case ADD_MUSICIAN:\r\n      const addState = { ...state };\r\n      addState[action.payload.id] = action.payload;\r\n      return addState;\r\n    // return { ...action.payload };\r\n    case GET_ONE:\r\n      return { ...action.payload };\r\n    case DELETE_MUSICIAN:\r\n      const currentState = { ...state };\r\n      delete currentState[action.payload.id];\r\n      return currentState;\r\n    case UPDATE_BIOGRAPHY:\r\n      return { ...action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}