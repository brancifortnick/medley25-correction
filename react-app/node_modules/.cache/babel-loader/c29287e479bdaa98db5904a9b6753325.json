{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useParams,Link}from\"react-router-dom\";import{getOneUser,addMusicianProfile}from\"../../store/user\";import UsersMusicians from\"../UsersMusicians/UsersMusicians\";// import backdrop from \"../../assets/blueandpink.jpg\";\nimport\"./User.css\";function User(){const dispatch=useDispatch();const{userId}=useParams();const usersInformation=useSelector(state=>state.usersReducer);const user=useSelector(state=>state.session.user);const[isCreatingMusician,setIsCreatingMusician]=useState(false);useEffect(()=>{dispatch(getOneUser(Number(userId)));},[dispatch,userId]);const handleAddMusician=async()=>{setIsCreatingMusician(true);try{const result=await dispatch(addMusicianProfile(userId));if(result.errors){alert(`Error: ${result.errors}`);}else{alert(\"Musician profile created successfully! You can now edit it.\");// Refresh the user data to show the new musician\ndispatch(getOneUser(Number(userId)));}}catch(error){console.error(\"Error creating musician:\",error);alert(\"An error occurred while creating the musician profile.\");}finally{setIsCreatingMusician(false);}};return/*#__PURE__*/React.createElement(\"div\",{className:\"user-page-container\"},/*#__PURE__*/React.createElement(\"div\",{id:\"usersMusicians-component\"},/*#__PURE__*/React.createElement(\"div\",{id:\"component\"},/*#__PURE__*/React.createElement(Link,{style:{textDecoration:\"none\",color:\"black\",marginLeft:\"10px\",padding:\"8px 16px\",backgroundColor:\"#c4b180\",borderRadius:\"6px\"},to:`/users/${userId}/add-musician`},\"Add Musician Profile\"),/*#__PURE__*/React.createElement(UsersMusicians,{userId:Number(userId)}))));}export default User;//-REFACTORED BELOW CODE\n// const [user, setUser] = useState({});\n// useEffect(() => {\n//   if (!userId) {\n//     return;\n//   }\n//   (async () => {\n//     const response = await fetch(`/api/users/${userId}`);\n//     const user = await response.json();\n//     setUser(user);\n//   })();\n// }, [userId]);\n// if (!user) {\n//   return null;\n// }","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","useParams","Link","getOneUser","addMusicianProfile","UsersMusicians","User","dispatch","userId","usersInformation","state","usersReducer","user","session","isCreatingMusician","setIsCreatingMusician","Number","handleAddMusician","result","errors","alert","error","console","createElement","className","id","style","textDecoration","color","marginLeft","padding","backgroundColor","borderRadius","to"],"sources":["/home/nicholas/med/medley-sesh/react-app/src/components/User/User.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getOneUser, addMusicianProfile } from \"../../store/user\";\nimport UsersMusicians from \"../UsersMusicians/UsersMusicians\";\n// import backdrop from \"../../assets/blueandpink.jpg\";\nimport \"./User.css\";\n\nfunction User() {\n  const dispatch = useDispatch();\n  const { userId } = useParams();\n  const usersInformation = useSelector((state) => state.usersReducer);\n  const user = useSelector(state => state.session.user);\n  \n  const [isCreatingMusician, setIsCreatingMusician] = useState(false);\n\n  useEffect(() => {\n    dispatch(getOneUser(Number(userId)));\n  }, [dispatch, userId]);\n\n  const handleAddMusician = async () => {\n    setIsCreatingMusician(true);\n    try {\n      const result = await dispatch(addMusicianProfile(userId));\n      if (result.errors) {\n        alert(`Error: ${result.errors}`);\n      } else {\n        alert(\"Musician profile created successfully! You can now edit it.\");\n        // Refresh the user data to show the new musician\n        dispatch(getOneUser(Number(userId)));\n      }\n    } catch (error) {\n      console.error(\"Error creating musician:\", error);\n      alert(\"An error occurred while creating the musician profile.\");\n    } finally {\n      setIsCreatingMusician(false);\n    }\n  };\n\n  return (\n    <div className=\"user-page-container\">\n \n  \n    \n      {/* <div id=\"your-musicians-text\">\n        <strong> Your Musicians </strong>\n      </div> */}\n\n      <div id=\"usersMusicians-component\">\n\n     \n        <div id=\"component\">\n          <Link\n            style={{\n              textDecoration: \"none\",\n              color: \"black\",\n              marginLeft: \"10px\",\n              padding: \"8px 16px\",\n              backgroundColor: \"#c4b180\",\n              borderRadius: \"6px\",\n\n            }}\n            to={`/users/${userId}/add-musician`}\n          >\n            Add Musician Profile\n          </Link>\n          <UsersMusicians userId={Number(userId)}/>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default User;\n\n//-REFACTORED BELOW CODE\n\n// const [user, setUser] = useState({});\n// useEffect(() => {\n//   if (!userId) {\n//     return;\n//   }\n//   (async () => {\n//     const response = await fetch(`/api/users/${userId}`);\n//     const user = await response.json();\n//     setUser(user);\n//   })();\n// }, [userId]);\n\n// if (!user) {\n//   return null;\n// }\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAClD,OAASC,UAAU,CAAEC,kBAAkB,KAAQ,kBAAkB,CACjE,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D;AACA,MAAO,YAAY,CAEnB,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACd,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEQ,MAAO,CAAC,CAAGP,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAAQ,gBAAgB,CAAGV,WAAW,CAAEW,KAAK,EAAKA,KAAK,CAACC,YAAY,CAAC,CACnE,KAAM,CAAAC,IAAI,CAAGb,WAAW,CAACW,KAAK,EAAIA,KAAK,CAACG,OAAO,CAACD,IAAI,CAAC,CAErD,KAAM,CAACE,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAEnEC,SAAS,CAAC,IAAM,CACdS,QAAQ,CAACJ,UAAU,CAACa,MAAM,CAACR,MAAM,CAAC,CAAC,CAAC,CACtC,CAAC,CAAE,CAACD,QAAQ,CAAEC,MAAM,CAAC,CAAC,CAEtB,KAAM,CAAAS,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpCF,qBAAqB,CAAC,IAAI,CAAC,CAC3B,GAAI,CACF,KAAM,CAAAG,MAAM,CAAG,KAAM,CAAAX,QAAQ,CAACH,kBAAkB,CAACI,MAAM,CAAC,CAAC,CACzD,GAAIU,MAAM,CAACC,MAAM,CAAE,CACjBC,KAAK,CAAC,UAAUF,MAAM,CAACC,MAAM,EAAE,CAAC,CAClC,CAAC,IAAM,CACLC,KAAK,CAAC,6DAA6D,CAAC,CACpE;AACAb,QAAQ,CAACJ,UAAU,CAACa,MAAM,CAACR,MAAM,CAAC,CAAC,CAAC,CACtC,CACF,CAAE,MAAOa,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDD,KAAK,CAAC,wDAAwD,CAAC,CACjE,CAAC,OAAS,CACRL,qBAAqB,CAAC,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,mBACEnB,KAAA,CAAA2B,aAAA,QAAKC,SAAS,CAAC,qBAAqB,eAQlC5B,KAAA,CAAA2B,aAAA,QAAKE,EAAE,CAAC,0BAA0B,eAGhC7B,KAAA,CAAA2B,aAAA,QAAKE,EAAE,CAAC,WAAW,eACjB7B,KAAA,CAAA2B,aAAA,CAACrB,IAAI,EACHwB,KAAK,CAAE,CACLC,cAAc,CAAE,MAAM,CACtBC,KAAK,CAAE,OAAO,CACdC,UAAU,CAAE,MAAM,CAClBC,OAAO,CAAE,UAAU,CACnBC,eAAe,CAAE,SAAS,CAC1BC,YAAY,CAAE,KAEhB,CAAE,CACFC,EAAE,CAAE,UAAUzB,MAAM,eAAgB,EACrC,sBAEK,CAAC,cACPZ,KAAA,CAAA2B,aAAA,CAAClB,cAAc,EAACG,MAAM,CAAEQ,MAAM,CAACR,MAAM,CAAE,CAAC,CACrC,CACF,CACF,CAAC,CAEV,CACA,cAAe,CAAAF,IAAI,CAEnB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module"}